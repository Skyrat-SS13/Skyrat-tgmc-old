<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <base href="../" />
    <link rel="stylesheet" href="dmdoc.css" />
    <title>&#x2F;atom&#x2F;movable - byond</title>
</head>
<body>
<header>
    <a href="index.html">byond</a> -
    <a href="index.html#modules">Modules</a> -
    <a href="index.html#types">Types</a>
 &mdash; <a href="atom/movable.html#var">Var Details</a> - <a href="atom/movable.html#proc">Proc Details</a></header>
<main>
<h1>movable <aside>/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a></aside>
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/(builtins)#L1">
        <img src="git.png" width="16" height="16" title="(builtins) 1"/></a></h1>

<table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr>
            <tr><th><a href="atom/movable.html#var/affected_movable_lights">affected_movable_lights</a></th><td>Lazylist to keep track on the sources of illumination.</td></tr>
            <tr><th><a href="atom/movable.html#var/affecting_dynamic_lumi">affecting_dynamic_lumi</a></th><td>Highest-intensity light affecting us, which determines our visibility.</td></tr>
            <tr><th><a href="atom/movable.html#var/blocks_emissive">blocks_emissive</a></th><td>Either FALSE, <a href="code/__DEFINES/lighting.html#define/EMISSIVE_BLOCK_GENERIC" title="EMISSIVE_BLOCK_GENERIC">EMISSIVE_BLOCK_GENERIC</a>, or <a href="code/__DEFINES/lighting.html#define/EMISSIVE_BLOCK_UNIQUE" title="EMISSIVE_BLOCK_UNIQUE">EMISSIVE_BLOCK_UNIQUE</a></td></tr>
            <tr><th><a href="atom/movable.html#var/em_block">em_block</a></th><td>Internal holder for emissive blocker object, do not use directly use blocks_emissive</td></tr>
            <tr><th><a href="atom/movable.html#var/important_recursive_contents">important_recursive_contents</a></th><td>an associative lazylist of relevant nested contents by &quot;channel&quot;, the list is of the form: list(channel = list(important nested contents of that type))
each channel has a specific purpose and is meant to replace potentially expensive nested contents iteration
do NOT add channels to this for little reason as it can add considerable memory usage.</td></tr>
            <tr><th><a href="atom/movable.html#var/move_resist">move_resist</a></th><td>How much the atom resists being thrown or moved.</td></tr>
            <tr><th><a href="atom/movable.html#var/moving_diagonally">moving_diagonally</a></th><td>TRUE if we should not push or shuffle on bump/enter</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr>
            <tr><th><a href="atom/movable.html#proc/CanPassThrough">CanPassThrough</a></th><td>Returns true or false to allow src to move through the blocker, mover has final say</td></tr>
            <tr><th><a href="atom/movable.html#proc/Crossed">Crossed</a></th><td>default byond proc that is deprecated for us in lieu of signals. do not call</td></tr>
            <tr><th><a href="atom/movable.html#proc/Move">Move</a></th><td>The move proc is responsible for (in order):</td></tr>
            <tr><th><a href="atom/movable.html#proc/Uncross">Uncross</a></th><td><code>Uncross()</code> is a default BYOND proc that is called when something is <em>going</em>
to exit this atom's turf. It is prefered over <code>Uncrossed</code> when you want to
deny that movement, such as in the case of border objects, objects that allow
you to walk through them in any direction except the one they block
(think side windows).</td></tr>
            <tr><th><a href="atom/movable.html#proc/Uncrossed">Uncrossed</a></th><td>default byond proc that is normally called on everything inside the previous turf
a movable was in after moving to its current turf
this is wasteful since the vast majority of objects do not use Uncrossed
use connect_loc to register to COMSIG_ATOM_EXITED instead</td></tr>
            <tr><th><a href="atom/movable.html#proc/_reset_transformation_animation">_reset_transformation_animation</a></th><td>Resets filters and removes transformation animations helper objects from vis contents.</td></tr>
            <tr><th><a href="atom/movable.html#proc/abstract_move">abstract_move</a></th><td>meant for movement with zero side effects. only use for objects that are supposed to move &quot;invisibly&quot; (like camera mobs or ghosts)
if you want something to move onto a tile with a beartrap or recycler or tripmine or mouse without that object knowing about it at all, use this
most of the time you want forceMove()</td></tr>
            <tr><th><a href="atom/movable.html#proc/become_hearing_sensitive">become_hearing_sensitive</a></th><td>allows this movable to hear and adds itself to the important_recursive_contents list of itself and every movable loc its in</td></tr>
            <tr><th><a href="atom/movable.html#proc/compose_name_href">compose_name_href</a></th><td>Allows us to wrap the name for specific cases like AI tracking or observer tracking</td></tr>
            <tr><th><a href="atom/movable.html#proc/face_atom">face_atom</a></th><td>Change the direction of the atom to face the targeted atom</td></tr>
            <tr><th><a href="atom/movable.html#proc/set_light_range_power_color">set_light_range_power_color</a></th><td>Helper to change several lighting overlay settings.</td></tr>
            <tr><th><a href="atom/movable.html#proc/stop_throw">stop_throw</a></th><td>Annul all throw var to ensure a clean exit out of throw state</td></tr>
            <tr><th><a href="atom/movable.html#proc/supply_export">supply_export</a></th><td>Should return a /datum/export_report if overriden</td></tr>
            <tr><th><a href="atom/movable.html#proc/transformation_animation">transformation_animation</a></th><td>Creates animation that turns current icon into result appearance from top down.</td></tr>
            <tr><th><a href="atom/movable.html#proc/update_dynamic_luminosity">update_dynamic_luminosity</a></th><td>Keeps track of the sources of dynamic luminosity and updates our visibility with the highest.</td></tr>
            <tr><th><a href="atom/movable.html#proc/update_emissive_block">update_emissive_block</a></th><td>Updates this movables emissive overlay</td></tr></table>
    <h2 id="var">Var Details</h2><h3 id="var/affected_movable_lights"><aside class="declaration">var </aside>affected_movable_lights
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L53">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 53"/></a></h3>
        <p>Lazylist to keep track on the sources of illumination.</p><h3 id="var/affecting_dynamic_lumi"><aside class="declaration">var </aside>affecting_dynamic_lumi
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L55">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 55"/></a></h3>
        <p>Highest-intensity light affecting us, which determines our visibility.</p><h3 id="var/blocks_emissive"><aside class="declaration">var </aside>blocks_emissive
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L46">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 46"/></a></h3>
        <p>Either FALSE, <a href="code/__DEFINES/lighting.html#define/EMISSIVE_BLOCK_GENERIC" title="EMISSIVE_BLOCK_GENERIC">EMISSIVE_BLOCK_GENERIC</a>, or <a href="code/__DEFINES/lighting.html#define/EMISSIVE_BLOCK_UNIQUE" title="EMISSIVE_BLOCK_UNIQUE">EMISSIVE_BLOCK_UNIQUE</a></p><h3 id="var/em_block"><aside class="declaration">var </aside>em_block
            <aside>&ndash; /<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/<a href="atom/movable/emissive_blocker.html">emissive_blocker</a></aside>
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L48">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 48"/></a></h3>
        <p>Internal holder for emissive blocker object, do not use directly use blocks_emissive</p><h3 id="var/important_recursive_contents"><aside class="declaration">var </aside>important_recursive_contents
            <aside>&ndash; /list</aside>
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L64">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 64"/></a></h3>
        <p>an associative lazylist of relevant nested contents by &quot;channel&quot;, the list is of the form: list(channel = list(important nested contents of that type))
each channel has a specific purpose and is meant to replace potentially expensive nested contents iteration
do NOT add channels to this for little reason as it can add considerable memory usage.</p><h3 id="var/move_resist"><aside class="declaration">var </aside>move_resist
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L9">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 9"/></a></h3>
        <p>How much the atom resists being thrown or moved.</p><h3 id="var/moving_diagonally"><aside class="declaration">var </aside>moving_diagonally
            <aside>&ndash; </aside>
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L24">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 24"/></a></h3>
        <p>TRUE if we should not push or shuffle on bump/enter</p><h2 id="proc">Proc Details</h2><h3 id="proc/CanPassThrough"><aside class="declaration">proc </aside>CanPassThrough<aside>(/<a href="atom.html">atom</a>/blocker, /<a href="turf.html">turf</a>/target, blocker_opinion) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L1033">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 1033"/></a></aside>
        </h3>
        <p>Returns true or false to allow src to move through the blocker, mover has final say</p><h3 id="proc/Crossed">Crossed<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/AM, oldloc) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L285">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 285"/></a></aside>
        </h3>
        <p>default byond proc that is deprecated for us in lieu of signals. do not call</p><h3 id="proc/Move"><aside class="declaration">proc </aside>Move<aside>(/<a href="atom.html">atom</a>/newloc, direction, glide_size_override) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L175">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 175"/></a></aside>
        </h3>
        <p>The move proc is responsible for (in order):</p>
<ul>
<li>Checking if you can move out of the current loc (The exit proc, which calls on_exit through the connect_loc)</li>
<li>Checking if you can move into the new loc (The enter proc, which calls on_enter through the connect_loc and is also overwritten by some atoms)
This is where most bumps take place</li>
<li>If you can do both, then it changes the loc var calls Exited on the old loc, and Entered on the new loc</li>
<li>After that, it does some area checks, calls Moved and handle pulling/buckled mobs.area</li>
</ul>
<p>A diagonal move is slightly different as Moved, entered and exited is called only once
In order of calling:</p>
<ul>
<li>Check if you can exit the current loc</li>
<li>Check if it's a diagonal move</li>
<li>If yes, check if you could exit the turf in that direction, and then if you can enter it (This calls on_exit and on_enter)</li>
<li>Check if you can enter the final new loc</li>
<li>Do the rest of the Move proc normally (Moved, entered, exited, check area change etc)</li>
</ul>
<p>Warning : Doesn't support well multi-tile diagonal moves</p><h3 id="proc/Uncross">Uncross<aside>() 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L309">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 309"/></a></aside>
        </h3>
        <p><code>Uncross()</code> is a default BYOND proc that is called when something is <em>going</em>
to exit this atom's turf. It is prefered over <code>Uncrossed</code> when you want to
deny that movement, such as in the case of border objects, objects that allow
you to walk through them in any direction except the one they block
(think side windows).</p>
<p>While being seemingly harmless, most everything doesn't actually want to
use this, meaning that we are wasting proc calls for every single atom
on a turf, every single time something exits it, when basically nothing
cares.</p>
<p>This overhead caused real problems on Sybil round #159709, where lag
attributed to Uncross was so bad that the entire master controller
collapsed and people made Among Us lobbies in OOC.</p>
<p>If you want to replicate the old <code>Uncross()</code> behavior, the most apt
replacement is [<code>/datum/element/connect_loc</code>] while hooking onto
[<code>COMSIG_ATOM_EXIT</code>].</p><h3 id="proc/Uncrossed">Uncrossed<aside>(/<a href="atom.html">atom</a>/<a href="atom/movable.html">movable</a>/AM) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L319">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 319"/></a></aside>
        </h3>
        <p>default byond proc that is normally called on everything inside the previous turf
a movable was in after moving to its current turf
this is wasteful since the vast majority of objects do not use Uncrossed
use connect_loc to register to COMSIG_ATOM_EXITED instead</p><h3 id="proc/_reset_transformation_animation"><aside class="declaration">proc </aside>_reset_transformation_animation<aside>(filter_index) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/__HELPERS/icons.dm#L1140">
        <img src="git.png" width="16" height="16" title="code&#x2F;__HELPERS&#x2F;icons.dm 1140"/></a></aside>
        </h3>
        <p>Resets filters and removes transformation animations helper objects from vis contents.</p><h3 id="proc/abstract_move"><aside class="declaration">proc </aside>abstract_move<aside>(/<a href="atom.html">atom</a>/new_loc) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L152">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 152"/></a></aside>
        </h3>
        <p>meant for movement with zero side effects. only use for objects that are supposed to move &quot;invisibly&quot; (like camera mobs or ghosts)
if you want something to move onto a tile with a beartrap or recycler or tripmine or mouse without that object knowing about it at all, use this
most of the time you want forceMove()</p><h3 id="proc/become_hearing_sensitive"><aside class="declaration">proc </aside>become_hearing_sensitive<aside>(trait_source) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L1041">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 1041"/></a></aside>
        </h3>
        <p>allows this movable to hear and adds itself to the important_recursive_contents list of itself and every movable loc its in</p><h3 id="proc/compose_name_href"><aside class="declaration">proc </aside>compose_name_href<aside>(name) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/say.dm#L88">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;say.dm 88"/></a></aside>
        </h3>
        <p>Allows us to wrap the name for specific cases like AI tracking or observer tracking</p>
<p>Arguments</p>
<ul>
<li>name {string} the name of the mob to modify.</li>
</ul><h3 id="proc/face_atom"><aside class="declaration">proc </aside>face_atom<aside>(/<a href="atom.html">atom</a>/A) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L934">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 934"/></a></aside>
        </h3>
        <p>Change the direction of the atom to face the targeted atom</p><h3 id="proc/set_light_range_power_color"><aside class="declaration">proc </aside>set_light_range_power_color<aside>(range, power, color) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/movable_luminosity.dm#L16">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;movable_luminosity.dm 16"/></a></aside>
        </h3>
        <p>Helper to change several lighting overlay settings.</p><h3 id="proc/stop_throw"><aside class="declaration">proc </aside>stop_throw<aside>() 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L556">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 556"/></a></aside>
        </h3>
        <p>Annul all throw var to ensure a clean exit out of throw state</p><h3 id="proc/supply_export"><aside class="declaration">proc </aside>supply_export<aside>(faction_selling) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/modules/requisitions/supply_export.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;modules&#x2F;requisitions&#x2F;supply_export.dm 2"/></a></aside>
        </h3>
        <p>Should return a /datum/export_report if overriden</p><h3 id="proc/transformation_animation"><aside class="declaration">proc </aside>transformation_animation<aside>(result_appearance, time, transform_overlay, reset_after) 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/__HELPERS/icons.dm#L1105">
        <img src="git.png" width="16" height="16" title="code&#x2F;__HELPERS&#x2F;icons.dm 1105"/></a></aside>
        </h3>
        <p>Creates animation that turns current icon into result appearance from top down.</p>
<p>result_appearance - End result appearance/atom/image
time - Animation duration
transform_overlay - Appearance/atom/image of effect that moves along the animation - should be horizonatally centered
reset_after - If FALSE, filters won't be reset and helper vis_objects will not be removed after animation duration expires. Cleanup must be handled by the caller!</p><h3 id="proc/update_dynamic_luminosity"><aside class="declaration">proc </aside>update_dynamic_luminosity<aside>() 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/movable_luminosity.dm#L2">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;movable_luminosity.dm 2"/></a></aside>
        </h3>
        <p>Keeps track of the sources of dynamic luminosity and updates our visibility with the highest.</p><h3 id="proc/update_emissive_block"><aside class="declaration">proc </aside>update_emissive_block<aside>() 
        
    
            <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/blob/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76/code/game/atoms_movable.dm#L131">
        <img src="git.png" width="16" height="16" title="code&#x2F;game&#x2F;atoms_movable.dm 131"/></a></aside>
        </h3>
        <p>Updates this movables emissive overlay</p></main>
<footer>
    tgmc.dme
    <a href="https://github.com/Skyrat-SS13/Skyrat-tgmc/tree/3991d5e1c53e2012ff7f633c4ac6ca9e768afc76">3991d5e</a>
        (master) &mdash; <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/src/dmdoc/README.md">dmdoc 1.4.1</a></footer>
</body>
</html>
